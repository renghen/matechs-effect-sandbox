(this["webpackJsonpmatechs-canvas"]=this["webpackJsonpmatechs-canvas"]||[]).push([[0],{131:function(e,n,t){e.exports=t(154)},136:function(e,n,t){},137:function(e,n,t){},141:function(e,n){},143:function(e,n){},154:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(32),i=t.n(c),u=(t(136),t(1)),o=(t(137),function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n}),l=t(0),f=t(17),s=t(6),d=t(33),p=t(13),m=t(3),h=t(5),b=t(7),v=function(e){return function(n){return n[e]}},E=function(e,n){return function(t){return t[e][n]}},g=v,y=(E("detail","value"),t(4)),j=function(e){return l.a.sync((function(){return e()}))},O=function(e){return Object(b.Do)(l.a.effect).bind("r",j(s.randomInt(0,255))).bind("g",j(s.randomInt(0,255))).bind("b",j(s.randomInt(0,255))).bind("a",null!=e?l.a.pure(e):j(Object(m.pipe)(s.randomInt(0,10),p.map((function(e){return e/10}))))).return((function(e){var n=e.r,t=e.g,r=e.b,a=e.a;return"rgba(".concat(n,", ").concat(t,", ").concat(r,", ").concat(a,")")}))};var w,k="@uri/canvas",S=function(e,n,t,r,a){return l.a.accessM((function(c){var i=c[k];return Object(m.pipe)(l.a.zip(r?l.a.pure(r):j(s.randomInt(0,360)),a?l.a.pure(a):j(s.randomInt(Math.PI/10*1e3,1e3*Math.PI))),l.a.chain((function(r){var a=Object(u.a)(r,2),c=a[0],f=a[1];return Object(b.Do)(l.a.effect).do(Object(m.pipe)(O(1),l.a.chain(i.strokeStyle))).do(Object(m.pipe)(O(),l.a.chain(i.fillStyle))).do(i.lineWidth(2)).do(i.beginPath).do(i.arc(e,n,t,c,f/1e3)).do(i.stroke).do(i.fill).return(Object(h.constant)(o(e,n,t,c,f)))})))}))},C=l.a.accessM((function(e){return e[k].clearRect(0,0)})),I=l.a.accessM((function(e){return e[k].canvas})),L=function(e){return function(n){return null!=n?l.a.pure(n):function(e){return Object(m.pipe)(I,l.a.map((function(n){return n[e]})))}(e)}},M=L("width"),P=L("height"),R=function(e){return function(n,t,r,a){return Object(b.Do)(l.a.effect).bind("width",M(r)).bind("height",P(a)).doL((function(r){var a=r.width,c=r.height;return l.a.sync((function(){return e.clearRect(n,t,a,c)}))})).return(h.constVoid)}},B=function(e,n){return l.d.fromSource(l.c.managed.chain(l.c.bracket(l.a.accessM((function(t){return l.a.sync((function(){var r=l.d.su.queueUtils(),a=r.next,c=r.ops,i=r.hasCB;return{unsubscribe:(n?t["@uri/emitter"].addEventListener(n):t["@uri/emitter"].fromEvent)(e)((function(e){return a({_tag:"offer",a:e})})),ops:c,hasCB:i}}))})),g("unsubscribe")),(function(e){var n=e.ops,t=e.hasCB;return l.d.su.emitter(n,t)})))},D=function(e){return Object(m.pipe)(B("keyup"),l.d.filter((function(n){return n.keyCode===e})),l.d.takeWhile(Object(h.constant)(!1)),l.d.drain)},W=Object(m.pipe)(l.a.accessM((function(e){return e[k].canvas})),l.d.encaseEffect,l.d.chain((function(e){return B("click",e)})),(w=D(68),function(e){return function(e,n){var t=l.d.as({type:"until"})(l.d.encaseEffect(n)),r=Object(m.pipe)(e,l.d.map((function(e){return{type:"stream",value:e}})));return Object(m.pipe)(l.d.mergeAll([t,r]),l.d.takeWhile((function(e){return"stream"===e.type})),l.d.filter((function(e){return"stream"===e.type})),l.d.map((function(e){return e.value})))}(e,w)}),l.d.map((function(e){return o(e.offsetX,e.offsetY)})),l.d.chain((function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(m.pipe)(s.randomInt(30,200),j,l.a.chain((function(e){return S(t,r,e)})),l.d.encaseEffect)})),l.d.chain((function(e){var n=Object(u.a)(e,5),t=n[0],r=n[1],a=n[2],c=n[3],i=n[4];return l.d.encaseEffect(j(Object(m.pipe)(d.now,p.map((function(e){return o(t,r,a,c,i,e)})))))})),l.d.collectArray,l.a.chain((function(e){return l.a.as(Object(f.a)("Done drawing!"),e)}))),x=function(e){var n,t=Object(b.Do)(l.a.effect).do(Object(f.a)("Replaying...")).do(C).do((n=e,n.reduce((function(e,t,r){var a=n[r-1],c=a?(t[5]-a[5])/2:0;return e.push(l.a.delay(S(t[0],t[1],t[2],t[3],t[4]),c)),e}),[]).reduce((function(e,n){return Object(m.pipe)(e,l.a.chain((function(){return n})))})))).do(l.a.never).return(h.constVoid);return l.a.zip(D(82),l.a.forever(l.a.race(D(82),t)))},z=Object(b.Do)(l.a.effect).bind("circles",W).doL(Object(h.flow)(g("circles"),(function(e){return x(e)}))).done(),A=Object(b.Do)(l.a.effect).bind("fiber",l.a.fork(z)).do(D(88)).doL((function(e){return e.fiber.interrupt})).do(C).doL((function(){return A})).return(h.constVoid),V=function(e){return r.useEffect((function(){if(e.current){var n=e.current.getContext("2d");n&&Object(m.pipe)(A,l.a.provideS((t=document,Object(y.a)({},"@uri/emitter",{fromEvent:function(e){return function(n){return t.addEventListener(e,n),l.a.sync((function(){return t.removeEventListener(e,n)}))}},addEventListener:function(e){return function(n){return function(t){return e.addEventListener(n,t),l.a.sync((function(){return e.removeEventListener(n,t)}))}}}}))),l.a.provideS(function(e){return Object(y.a)({},k,{canvas:l.a.pure(e.canvas),arc:function(n,t,r,a,c){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return l.a.sync((function(){return e.arc(n,t,r,a,c,i)}))},clearRect:R(e),beginPath:l.a.sync((function(){return e.beginPath()})),stroke:l.a.sync((function(){return e.stroke()})),fill:l.a.sync((function(){return e.fill()})),lineWidth:function(n){return l.a.sync((function(){e.lineWidth=Math.abs(n)}))},strokeStyle:function(n){return l.a.sync((function(){e.strokeStyle=n}))},fillStyle:function(n){return l.a.sync((function(){e.fillStyle=n}))}})}(n)),f.b,l.a.run)}var t}),[e])},J=function(){var e=a.a.useRef(null),n=a.a.useState(o(0,0)),t=Object(u.a)(n,2),r=Object(u.a)(t[0],2),c=r[0],i=r[1],l=t[1];return a.a.useEffect((function(){setTimeout((function(){if(e.current&&e.current.parentElement){console.log(e.current.parentElement.getBoundingClientRect());var n=e.current.parentElement.getBoundingClientRect(),t=n.width,r=n.height;l(o(t,r))}}),1)}),[e,l]),o(a.a.createElement("canvas",{height:i,width:c,ref:e}),e)};var Y=function(){var e=J(),n=Object(u.a)(e,2),t=n[0],r=n[1];return V(r),a.a.createElement("div",{id:"app"},a.a.createElement("section",null,t),a.a.createElement("footer",null,a.a.createElement("ul",null,a.a.createElement("li",null,"Click anywhere on the canvas to draw a circle with a random."),a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"x")," to reset."),a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"d")," to commit."),a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"r")," to replay ",a.a.createElement("i",null,"(after commiting.)"),"."),a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"r")," again while replaying to cancel and restart.")),a.a.createElement("p",null,"You can redraw as many times as you want once a drawing has been comitted. Size and coordinates are preserved. Colours are not. Redrawing happens at twice."),a.a.createElement("p",null,"Circles have a random radius, start angle, end angle, color and border color.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.0375e646.chunk.js.map