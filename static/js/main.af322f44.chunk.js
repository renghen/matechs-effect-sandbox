(this["webpackJsonpmatechs-canvas"]=this["webpackJsonpmatechs-canvas"]||[]).push([[0],{133:function(e,n,t){e.exports=t(159)},138:function(e,n,t){},139:function(e,n,t){},143:function(e,n){},145:function(e,n){},159:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(34),o=t.n(c),i=(t(138),t(1)),u=t(4),f=(t(139),t(0)),s=t(13),l=t(6),d=t(35),p=t(17),m=t(23),b=t(3),v=t(5),h=t(14),E=function(e){return function(n){return n[e]}},g=function(e,n){return function(t){return t[e][n]}},j=E,O=(g("detail","value"),function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n});function y(e){return f.a.sync((function(){return e()}))}var w=Symbol();function k(e,n){return f.d.fromSource(f.c.managed.chain(f.c.bracket(f.a.accessM((function(t){return f.a.sync((function(){var r=f.d.su.queueUtils(),a=r.next,c=r.ops,o=r.hasCB;return{unsubscribe:(n?t[w].addEventListener(n):t[w].fromEvent)(e)((function(e){return a({_tag:"offer",a:e})})),ops:c,hasCB:o}}))})),j("unsubscribe")),(function(e){var n=e.ops,t=e.hasCB;return f.d.su.emitter(n,t)})))}var I,L=Object(u.a)({},w,{fromEvent:function(e){return function(n){return document.addEventListener(e,n),f.a.sync((function(){return document.removeEventListener(e,n)}))}},addEventListener:function(e){return function(n){return function(t){return e.addEventListener(n,t),f.a.sync((function(){return e.removeEventListener(n,t)}))}}}}),S=Symbol(),C=function(e,n,t,r,a){return f.a.accessM((function(c){return Object(b.pipe)(f.a.zip(r?f.a.pure(r):y(l.randomInt(0,360)),a?f.a.pure(a):y(l.randomInt(Math.PI/10*1e3,1e3*Math.PI))),f.a.chain((function(r){var a=Object(i.a)(r,2),o=a[0],u=a[1];return f.a.sync((function(){return c[S].strokeStyle="rgb(".concat(l.randomInt(0,255)(),", ").concat(l.randomInt(0,255)(),", ").concat(l.randomInt(0,255)(),")"),c[S].fillStyle="rgba(".concat(l.randomInt(0,255)(),", ").concat(l.randomInt(0,255)(),", ").concat(l.randomInt(0,255)(),", ").concat(l.randomInt(0,100)()/100,")"),c[S].lineWidth=2,c[S].beginPath(),c[S].arc(e,n,t,o,u/1e3),c[S].stroke(),c[S].fill(),O(e,n,t,o,u)}))})))}))},B=f.a.accessM((function(e){return f.a.sync((function(){e[S].clearRect(0,0,e[S].canvas.width,e[S].canvas.height)}))})),M=function(e){return Object(b.pipe)(k("keyup"),f.d.filter((function(n){return n.keyCode===e})),f.d.takeWhile(Object(v.constant)(!1)),f.d.drain)},x=Object(b.pipe)(k("click"),f.d.chain(Object(b.pipe)(p.ask(),p.map(s.a),p.map(f.d.encaseEffect))),f.d.drain,f.a.fork),P=Object(b.pipe)(f.a.accessM((function(e){return f.a.pure(e[S].canvas)})),f.d.encaseEffect,f.d.chain((function(e){return k("click",e)})),(I=M(68),function(e){return function(e,n){var t=f.d.as({type:"until"})(f.d.encaseEffect(n)),r=Object(b.pipe)(e,f.d.map((function(e){return{type:"stream",value:e}})));return Object(b.pipe)(f.d.mergeAll([t,r]),f.d.takeWhile((function(e){return"stream"===e.type})),f.d.filter((function(e){return"stream"===e.type})),f.d.map((function(e){return e.value})))}(e,I)}),f.d.map((function(e){return O(e.offsetX,e.offsetY)})),f.d.chain((function(e){var n=Object(i.a)(e,2),t=n[0],r=n[1];return Object(b.pipe)(l.randomInt(30,200),y,f.a.chain((function(e){return C(t,r,e)})),f.d.encaseEffect)})),f.d.chain((function(e){var n=Object(i.a)(e,5),t=n[0],r=n[1],a=n[2],c=n[3],o=n[4];return f.d.encaseEffect(y(Object(b.pipe)(d.now,m.map((function(e){return O(t,r,a,c,o,e)})))))})),f.d.collectArray,f.a.chain((function(e){return f.a.as(Object(s.a)("Done drawing!"),e)}))),R=Object(h.Do)(f.a.effect).bind("fiber",x).bindL("x",Object(v.flow)(j("fiber"),(function(e){return Object(b.pipe)(P,f.a.onInterrupted(e.interrupt))}))).return(j("x")),D=Object(h.Do)(f.a.effect).bind("circles",R).letL("proggy",Object(v.flow)(j("circles"),(function(e){return Object(h.Do)(f.a.effect).do(M(82)).do(Object(s.a)("Replaying..")).do(B).do(e.reduce((function(n,t,r){var a=e[r-1],c=a?(t[5]-a[5])/2:0;return n.push(f.a.delay(C(t[0],t[1],t[2],t[3],t[4]),c)),n}),[]).reduce((function(e,n){return Object(b.pipe)(e,f.a.chain((function(){return n})))}))).done()}))).doL(Object(v.flow)(j("proggy"),(function(e){return Object(b.pipe)(e,f.a.forever)}))).done();var W=function(){var e=a.a.useRef(null),n=a.a.useState(O(0,0)),t=Object(i.a)(n,2),r=Object(i.a)(t[0],2),c=r[0],o=r[1],l=t[1];return a.a.useEffect((function(){setTimeout((function(){if(e.current&&e.current.parentElement){console.log(e.current.parentElement.getBoundingClientRect());var n=e.current.parentElement.getBoundingClientRect(),t=n.width,r=n.height;l(O(t,r))}}),1)}),[]),a.a.useEffect((function(){if(e.current){var n=e.current.getContext("2d");if(n){var t=Object(h.Do)(f.a.effect).bind("fiber",f.a.fork(D)).do(M(88)).doL((function(e){return e.fiber.interrupt})).do(B).doL((function(){return t})).return(v.constVoid);Object(b.pipe)(t,f.a.provideS(L),f.a.provideS(Object(u.a)({},S,n)),s.b,f.a.run)}}}),[]),a.a.createElement("div",{id:"app"},a.a.createElement("section",null,a.a.createElement("canvas",{height:o,width:c,ref:e})),a.a.createElement("footer",null,a.a.createElement("ul",null,a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"x")," to reset."),a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"d")," to commit."),a.a.createElement("li",null,"Press ",a.a.createElement("i",null,"r")," to replay ",a.a.createElement("i",null,"(after commiting.)"),".")),a.a.createElement("p",null,"You can redraw as many times as you want after committing. Size and coordinates are preserved. Colours are not. Redrawing happens at twice the speed you drew.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.af322f44.chunk.js.map